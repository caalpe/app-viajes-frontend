<div class="user-form-wrapper">
  <div class="user-form-header">
    <div class="header-content">
      <h1 class="header-title">Crear Cuenta</h1>
      <p class="header-subtitle">Únete a nuestra comunidad de viajeros</p>
    </div>
  </div>

  <div class="user-form-container">
    <div class="card user-card">
      <div class="card-body">
        <h2 class="form-section-title">Información Personal</h2>
        <p class="form-section-subtitle">Completa tus datos para crear tu perfil</p>

        <form [formGroup]="userForm" (ngSubmit)="onSubmit()" novalidate>
          <!-- Name -->
          <div class="mb-4">
            <label class="form-label" for="name">Nombre Completo *</label>
            <input
              id="name"
              type="text"
              class="form-control"
              formControlName="name"
              placeholder="Ej. Juan García López"
            />
            @if (userForm.get('name')?.touched && userForm.get('name')?.invalid) {
              <div class="invalid-feedback d-block mt-2">
                El nombre es obligatorio (mín 2, máx 100 caracteres).
              </div>
            }
          </div>

          <!-- Email -->
          <div class="mb-4">
            <label class="form-label" for="email">Correo Electrónico *</label>
            <input
              id="email"
              type="email"
              class="form-control"
              formControlName="email"
              placeholder="Ej. juan@ejemplo.com"
            />
            @if (userForm.get('email')?.touched && userForm.get('email')?.invalid) {
              <div class="invalid-feedback d-block mt-2">
                Ingresa un correo electrónico válido.
              </div>
            }
          </div>

          <!-- Password -->
          <div class="mb-4">
            <label class="form-label" for="password">Contraseña *</label>
            <div class="password-input-wrapper">
              <input
                id="password"
                [type]="passwordVisible ? 'text' : 'password'"
                class="form-control"
                formControlName="password"
                placeholder="Mínimo 8 caracteres"
              />
              <button
                type="button"
                class="btn-toggle-password"
                (click)="togglePasswordVisibility()"
                tabindex="-1"
              >
                <i [class]="passwordVisible ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
              </button>
            </div>
            @if (userForm.get('password')?.touched && userForm.get('password')?.invalid) {
              <div class="invalid-feedback d-block mt-2">
                La contraseña debe tener mínimo 8 caracteres.
              </div>
            }
          </div>

          <!-- Phone -->
          <div class="mb-4">
            <label class="form-label" for="phone">Teléfono</label>
            <input
              id="phone"
              type="tel"
              class="form-control"
              formControlName="phone"
              placeholder="Ej. +34 612 345 678"
            />
            <small class="text-muted d-block mt-2">Opcional. Úsalo para que otros viajeros puedan contactarte.</small>
          </div>

          <!-- Photo URL -->
          <div class="mb-4">
            <label class="form-label" for="photo_url">URL de Foto de Perfil</label>
            <input
              id="photo_url"
              type="url"
              class="form-control"
              formControlName="photo_url"
              placeholder="Ej. https://ejemplo.com/mi-foto.jpg"
            />
            <small class="text-muted d-block mt-2">Opcional. Sube una foto tuya para que otros te reconozcan.</small>
          </div>

          <!-- Bio -->
          <div class="mb-4">
            <label class="form-label" for="bio">Biografía</label>
            <textarea
              id="bio"
              class="form-control"
              formControlName="bio"
              rows="3"
              placeholder="Cuéntanos sobre ti, tus experiencias de viajes y qué te hace único..."
            ></textarea>
            <small class="text-muted d-block mt-2">Máximo 1000 caracteres. Opcional.</small>
          </div>

          <!-- Interests -->
          <div class="mb-4">
            <label class="form-label" for="interests">Intereses</label>
            <textarea
              id="interests"
              class="form-control"
              formControlName="interests"
              rows="2"
              placeholder="Ej. Aventura, Playa, Senderismo, Gastronomía, Cultura..."
            ></textarea>
            <small class="text-muted d-block mt-2">Máximo 500 caracteres. Separa tus intereses con comas. Opcional.</small>
          </div>

          <!-- Buttons -->
          <div class="form-actions">
            <button
              type="button"
              class="btn btn-cancel"
              (click)="onBack()"
            >
              Cancelar
            </button>

            <button
              type="submit"
              class="btn btn-create"
              [disabled]="isSubmitting"
            >
              {{ isSubmitting ? 'Creando...' : 'Crear Cuenta' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal Alert -->
<app-modal-alert
  [isVisible]="modalVisible"
  [title]="modalTitle"
  [message]="modalMessage"
  [type]="modalType"
  [redirectUrl]="modalRedirectUrl"
  (onClose)="onModalClose()"
></app-modal-alert>
