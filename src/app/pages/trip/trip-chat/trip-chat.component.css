:host{display:block;min-height:calc(100vh - 80px);background-color:#f8f9fa}
.chat-container{max-width:1400px;margin:0 auto;padding:20px}
.chat-header{background:#fff;padding:20px;border-radius:8px;margin-bottom:20px;box-shadow:0 2px 4px rgba(0,0,0,.1);display:flex;align-items:center;gap:20px;flex-wrap:wrap}
.chat-header h2{margin:0;font-size:24px;color:#2c3e50;display:flex;align-items:center;gap:10px;flex:1}
.btn-create-survey{background:#17a2b8;color:#fff;border:none;padding:10px 20px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center}
.btn-create-survey:hover{background:#138496;box-shadow:0 4px 12px rgba(23,162,184,.3);transform:translateY(-1px)}
.chat-content{display:grid;grid-template-columns:1fr 400px;gap:20px;align-items:start}
.messages-section{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);display:flex;flex-direction:column;overflow:hidden}
.messages-header{padding:16px 20px;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center;background:#f8f9fa}
.messages-header h3{margin:0;font-size:18px;color:#2c3e50}
.message-count{font-size:14px;color:#6c757d;background:#fff;padding:4px 12px;border-radius:12px}
.messages-list{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:16px;max-height:600px}
.message-wrapper{margin-bottom:16px}
.message-item{background:#f8f9fa;padding:12px 16px;border-radius:8px;border-left:3px solid #17a2b8;transition:all .3s ease}
.message-item:hover{box-shadow:0 2px 8px rgba(0,0,0,.1);transform:translateY(-1px)}
.message-item.own-message{background:#e7f5f7;border-left-color:#138496}
.message-actions{display:flex;justify-content:flex-end;margin-top:8px;gap:8px}
.btn-reply{background:transparent;border:1px solid #17a2b8;color:#17a2b8;padding:4px 12px;border-radius:4px;font-size:12px;cursor:pointer;transition:all .3s ease}
.btn-reply:hover{background:#17a2b8;color:#fff}
.replies-container{margin-left:30px;margin-top:12px;display:flex;flex-direction:column;gap:8px}
.reply-item{display:flex;gap:8px;align-items:flex-start}
.reply-indicator{color:#6c757d;font-size:16px;margin-top:4px;flex-shrink:0}
.reply-content{flex:1;background:#e9ecef;padding:10px 12px;border-radius:6px;border-left:2px solid #17a2b8;font-size:14px}
.reply-item.own-reply .reply-content{background:#d4edda;border-left-color:#28a745}
.message-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.user-name{font-weight:600;color:#2c3e50;font-size:14px}
.message-time{font-size:12px;color:#6c757d}
.message-body{position:relative}
.message-text{margin:0;color:#495057;line-height:1.5;word-wrap:break-word;white-space:pre-wrap}
.btn-delete-msg{position:absolute;top:-8px;right:0;background:#dc3545;color:#fff;border:none;border-radius:4px;padding:4px 8px;cursor:pointer;opacity:0;transition:all .3s ease;font-size:12px}
.message-item:hover .btn-delete-msg{opacity:1}
.btn-delete-msg:hover{background:#c82333}
.empty-state p{margin:8px 0 4px;font-size:16px;color:#495057}
.empty-state small{font-size:14px}
.loading-surveys{text-align:center;padding:16px;color:#6c757d;font-size:14px;display:flex;align-items:center;justify-content:center}
.new-message-section{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);display:flex;flex-direction:column;overflow:hidden;transition:all .3s ease;height:fit-content;position:sticky;top:20px}
.new-message-section.replying-mode{border:2px solid #17a2b8;box-shadow:0 4px 12px rgba(23,162,184,.2)}
.new-message-header{padding:16px 20px;border-bottom:1px solid #e9ecef;background:#f8f9fa;transition:all .3s ease}
.new-message-section.replying-mode .new-message-header{background:#e7f5f7}
.new-message-header h3{margin:0;font-size:18px;color:#2c3e50}
.reply-preview{background:#fff9e6;border-bottom:1px solid #ffe8a1;padding:12px 20px}
.reply-preview-header{display:flex;align-items:center;gap:8px;margin-bottom:6px;font-size:13px;color:#856404}
.reply-preview-header i{color:#17a2b8}
.btn-cancel-reply{margin-left:auto;background:transparent;border:none;color:#6c757d;cursor:pointer;padding:4px;border-radius:4px;transition:all .3s ease}
.btn-cancel-reply:hover{background:#f8f9fa;color:#dc3545}
.reply-preview-text{font-size:13px;color:#495057;font-style:italic;padding-left:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.message-form{padding:20px;display:flex;flex-direction:column}
.form-group{margin-bottom:16px}
.form-group label{display:block;margin-bottom:8px;font-weight:500;color:#495057;font-size:14px}
.form-group textarea{width:100%;min-height:120px;max-height:300px;padding:12px;border:1px solid #dee2e6;border-radius:6px;font-size:14px;font-family:inherit;resize:vertical;transition:all .3s ease}
.form-group textarea:focus{outline:none;border-color:#17a2b8;box-shadow:0 0 0 3px rgba(23,162,184,.1)}
.form-group textarea.is-invalid{border-color:#dc3545}
.form-group textarea.is-invalid:focus{box-shadow:0 0 0 3px rgba(220,53,69,.1)}
.invalid-feedback{color:#dc3545;font-size:13px;margin-top:6px}
.char-counter{text-align:right;font-size:12px;color:#6c757d;margin-top:6px}
.message-form .form-actions{margin-top:16px;padding:0;background:transparent;box-shadow:none;justify-content:flex-end;border:none}
.info-box small{color:#495057;line-height:1.4}

@media(max-width:992px){.chat-container{padding:10px}.chat-content{grid-template-columns:1fr;gap:15px}.messages-section{order:1}.new-message-section{order:2;position:static;width:100%}.messages-list{max-height:50vh;min-height:300px}.message-form{padding:15px}.message-form textarea{min-height:80px}.replies-container{margin-left:20px}}
@media(max-width:768px){.chat-header{padding:15px}.chat-header h2{font-size:20px}.messages-list{padding:15px;max-height:45vh}.form-actions{flex-direction:column;gap:10px}}
@media(max-width:576px){.chat-container{padding:5px}.chat-header{flex-direction:column;align-items:stretch;padding:12px;gap:12px}.chat-header h2{font-size:18px}.chat-content{gap:10px}.messages-list{padding:10px;max-height:40vh;min-height:250px}.message-form{padding:12px}.message-form textarea{min-height:70px;font-size:14px}.reply-preview{padding:10px;font-size:13px}.replies-container{margin-left:10px}.reply-indicator{font-size:13px}.message-actions{justify-content:flex-start;flex-wrap:wrap}.btn-reply{font-size:11px;padding:4px 10px}.message-form .form-actions button{padding:10px 16px;font-size:14px}.new-message-header h3{font-size:16px}}
